<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cadastro de novo PI</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" href="/Css/pg_adicionar.css" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
  <div class="wrapper">

    <!-- NAVBAR NOVA -->
    <nav class="navbar">
      <a href="/Pages/pg_home.html" class="logo-link">
        <img src="/Img/logo_colorida_senac.png" alt="Logo do Senac" class="logo" />
      </a>
      <button class="hamburger" aria-label="Abrir menu" aria-expanded="false">☰</button>
 
      <div class="nav-container">
        <a href="/Pages/pg_adicionar.html" class="nav-button active">
          <span class="icon-text"><i class="bi bi-plus-lg"></i> Submeter</span>
        </a>
        <a href="/Pages/pg_home.html" class="nav-button">
          <span class="icon-text"><i class="bi bi-house-door-fill"></i> Home</span>
        </a>
        <a href="/Pages/pg_pesquisa.html" class="nav-button">
          <span class="icon-text"><i class="bi bi-search"></i> Pesquisar PI</span>
        </a>
      </div>
    </nav>

<!-- Conteúdo principal -->
<main>
  <h2>Cadastro de Novo PI</h2>

  <!-- Formulário para cadastro do PI -->
  <form id="formAdicionarPI" enctype="multipart/form-data">
    
    <div class="form-group">
      <label for="curso">Curso:</label>
      <select id="curso">
        <option value="">Selecione</option>
        <option>Programador Full Stack</option>
        <option>Designer Gráfico</option>
        <option>Resíduos Sólidos</option>
        <option>Programador Web</option>
        <option>Bartender</option>
        <option> Cozinheiro</option>
        <option>Técnico em Desenvolvimento de Sistemas</option>
        <option>Programador de Dispositivos Móveis</option>
      </select>  
    </div>

    <div class="form-group">
      <label for="tipo de Curso">Tipo de Curso:</label>
      <select id="tipo de Curso">
        <option value="">Selecione</option>
        <option>Profissional</option>
        <option>Curso Técnico</option>
      </select>  
    </div>

    <div class="form-group input-clearable">
      <label for="titulo">Título do PI</label>
      <input type="text" id="titulo" placeholder="Insira aqui o título do PI." name="titulo" required>
      <button type="button" class="clear-button" onclick="clearInput(this)">×</button>
    </div>

    <div class="form-group input-clearable">
      <label for="membros">Membros do PI</label>
      <input type="text" id="membros" name="membros" placeholder="Separe os nomes por vírgula." required>
      <button type="button" class="clear-button" onclick="clearInput(this)">×</button>
    </div>

    <div class="form-group input-clearable">
      <label for="membros">Docente Principal</label>
      <input type="text" id="membros" name="membros" placeholder="Nome do docente da turma." required>
      <button type="button" class="clear-button" onclick="clearInput(this)">×</button>
    </div>

    <div class="form-group input-clearable">
      <label for="membros">Docentes Secundários</label>
      <input type="text" id="membros" name="membros" placeholder="Separe os nomes por vírgula.">
      <button type="button" class="clear-button" onclick="clearInput(this)">×</button>
    </div>

    <div class="form-group input-clearable">
      <label for="matriculaProfessor">Matrícula do Professor</label>
      <input type="text" id="matriculaProfessor" name="matriculaProfessor"
        placeholder="Informe a matrícula do professor."
        pattern="[0-9]+" title="Apenas números são permitidos." required>
      <button type="button" class="clear-button" onclick="clearInput(this)">×</button>
    </div>

    <script>
      document.getElementById('matriculaProfessor').addEventListener('keypress', function (e) {
        if (e.charCode < 48 || e.charCode > 57) {
          e.preventDefault();
        }
      });
      document.getElementById('matriculaProfessor').addEventListener('paste', function (e) {
        const pasted = (e.clipboardData || window.clipboardData).getData('text');
        if (!/^\d+$/.test(pasted)) {
          e.preventDefault();
        }
      });
    </script>

    <div class="form-group">
      <label for="dataPI">Data do PI</label>
      <input type="date" id="dataPI" name="dataPI" required>
    </div>

    <div class="form-group">
      <label for="arquivos">Upload de Arquivos</label>
      <input type="file" id="arquivos" name="arquivos" multiple required>
    </div>

    <div class="form-group input-clearable">
      <label for="descricao">Descrição do Projeto</label>
      <textarea id="descricao" name="descricao" rows="4" class="testando" placeholder="Fale sobre do que se trata esse PI." required></textarea>
      <button type="button" class="clear-button" onclick="clearInput(this)">×</button>
    </div>

    <div class="form-group">
      <button class="Salvar" type="submit" style="margin-top: 1px;" id="btnSalvar">Publicar PI</button>
    </div>
  </form>
</main>
</div>

     <!-- BOTÃO WHATSAPP -->
  <a href="https://wa.me/557131864000" class="whatsapp-btn" target="_blank" title="Fale conosco pelo WhatsApp">
    <i class="bi bi-whatsapp"></i>
  </a>

<footer class="footer">
  <div class="footer-container">
    <div class="footer-links">
      <a href="https://cursos.ba.senac.br/">Cursos</a>
      <a href="https://cursos.ba.senac.br/faq">FAQ</a>
      <a href="https://www.ba.senac.br/Institucional/Sobre">Sobre</a>
    </div>
    <div class="footer-social">
      <a href="https://www.instagram.com/senacbahia/" target="_blank"><i class="bi bi-instagram"></i></a>
      <a href="https://www.linkedin.com/school/senac-bahia" target="_blank"><i class="bi bi-linkedin"></i></a>
      <a href="https://www.youtube.com/senacbahia" target="_blank"><i class="bi bi-youtube"></i></a>
    </div>
  </div>
  <div class="footer-bottom">
    © 2025 Senac. Todos os direitos reservados.
  </div>
  <a href="#" class="back-to-top botaoTopo custom-top-button" title="Voltar ao topo">
    <i class="bi bi-arrow-up"></i>
  </a>
</footer>

<script>
  document.getElementById('formAdicionarPI').addEventListener('submit', function(event) {
    event.preventDefault();

    const qualificação = document.getElementById('tipo de Curso').value.trim();
    const curso = document.getElementById('curso').value.trim();
    const titulo = document.getElementById('titulo').value.trim();
    const membros = document.getElementById('membros').value.trim();
    const matriculaProfessor = document.getElementById('matriculaProfessor').value.trim();
    const descricao = document.getElementById('descricao').value.trim();
    const dataPI = document.getElementById('dataPI').value;
    const arquivos = document.getElementById('arquivos').files;

    if (!curso || !titulo || !membros || !matriculaProfessor || !descricao || !dataPI || arquivos.length === 0) {
      alert("Todos os campos são obrigatórios. Por favor, preencha todos eles.");
      return;
    }

    let pis = JSON.parse(localStorage.getItem('pis')) || [];

    const novoPI = {
      curso,
      titulo,
      descricao,
      membros,
      matriculaProfessor,
      dataPI,
      arquivos: arquivos.length 
    };

    pis.push(novoPI);
    localStorage.setItem('pis', JSON.stringify(pis));

    const btnSalvar = document.getElementById("btnSalvar");

    Swal.fire({
      title: 'Enviando...',
      text: 'Estamos processando seu pedido.',
      timer: 3000,
      timerProgressBar: true,
      allowOutsideClick: false,
      didOpen: () => {
        Swal.showLoading();
      }
    }).then(() => {
      Swal.fire({
        icon: 'success',
        title: 'PI enviado!',
        text: 'Seu Projeto Integrador foi cadastrado com sucesso!',
      }).then(() => {
        btnSalvar.textContent = "Enviado ✅";
        btnSalvar.disabled = true;
        window.location.href = "index.html";
      });
    });
  });

  function clearInput(button) {
    const input = button.previousElementSibling;
    input.value = '';
    input.focus();
    button.style.display = 'none';
  }

  document.addEventListener('input', function (e) {
    if (e.target.matches('.input-clearable input, .input-clearable textarea')) {
      const btn = e.target.parentElement.querySelector('.clear-button');
      btn.style.display = e.target.value ? 'inline-block' : 'none';
    }
  });
</script>

  <script src="/Js/funcoes.js"></script>

</body>
</html>
